from typing import Dict, NamedTuple

import numpy as np

from common.utils.tuples import ComponentFractions, PhaseLabels, PhaseValues
from entities.Multiflash import MultiflashResult


class InputArguments(NamedTuple):
    case_1: Dict = {
        "component_composition": {
            "3": 0.062202,
            "2": 0.0047,
            "1": 0.046539,
            "101": 0.65364,
            "201": 0.086307,
            "301": 0.045563,
            "401": 0.007579,
            "402": 0.015481,
            "503": 0.005188,
            "504": 0.00612,
            "605": 0.066681,
            "5": 0.001,
        },
        "temperature": 10,
        "pressure": 35,
    }
    case_2: Dict = {
        "component_composition": {
            "2": 0.0169,
            "1": 0.0539,
            "101": 0.854808,
            "201": 0.045685,
            "301": 0.0176,
            "401": 0.00242,
            "402": 0.00437,
            "503": 0.00121,
            "504": 0.0011,
            "608": 0.000147,
            "710": 0.000084,
            "809": 0.000023,
            "5": 0.001,
        },
        "temperature": 5,
        "pressure": 70,
    }
    case_3: Dict = {
        "component_composition": {
            "1": 0.026457,
            "2": 0.005817,
            "101": 0.874382,
            "201": 0.059121,
            "301": 0.023115,
            "401": 0.002947,
            "402": 0.005235,
            "503": 0.001027,
            "504": 0.000994,
            "5": 0.001,
        },
        "temperature": -69,
        "pressure": 36.51,
    }


class OutputArgumentsEntityTest(NamedTuple):
    case_1: MultiflashResult = MultiflashResult(
        phase_values={
            PhaseLabels.VAPOR: PhaseValues(percentage=0.7889194452, mercury=252.15087669),
            PhaseLabels.LIQUID: PhaseValues(percentage=0.1485055781, mercury=1492.7149426),
            PhaseLabels.AQUEOUS: PhaseValues(percentage=0.0615760650, mercury=41.540651304),
            PhaseLabels.MERCURY: PhaseValues(percentage=0.0009989116, mercury=1000000000.0),
        },
        component_fractions={
            "3": ComponentFractions(
                moles=np.array([0.00044930000, 0.0023390000, 0.997800000000, 0.00000000000000000000000006834]),
                mass=np.array([0.000391000, 0.000709200, 0.99590000000, 0.000000000000000000000000006138]),
            ),
            "2": ComponentFractions(
                moles=np.array([0.00588400000, 0.0003604000, 0.000002575000, 0.00000000000000000000000116800]),
                mass=np.array([0.007962000, 0.000169900, 0.00000399600, 0.000000000000000000000000163200]),
            ),
            "1": ComponentFractions(
                moles=np.array([0.05393000000, 0.0261200000, 0.001117000000, 0.00000000000000000000000848600]),
                mass=np.array([0.114700000, 0.019340000, 0.00272400000, 0.000000000000000000000001862000]),
            ),
            "101": ComponentFractions(
                moles=np.array([0.79800000000, 0.1574000000, 0.000848000000, 0.00000000000000000000014150000]),
                mass=np.array([0.618400000, 0.042500000, 0.00075370000, 0.000000000000000000000011310000]),
            ),
            "201": ComponentFractions(
                moles=np.array([0.09056000000, 0.0994700000, 0.000115900000, 0.00000000000000000000001295000]),
                mass=np.array([0.131500000, 0.050340000, 0.00019300000, 0.000000000000000000000001941000]),
            ),
            "301": ComponentFractions(
                moles=np.array([0.03492000000, 0.1210000000, 0.000123300000, 0.00000000000000000000000415900]),
                mass=np.array([0.074380000, 0.089750000, 0.00030120000, 0.000000000000000000000000914300]),
            ),
            "401": ComponentFractions(
                moles=np.array([0.00381700000, 0.0307000000, 0.000007368000, 0.00000000000000000000000039850]),
                mass=np.array([0.010720000, 0.030030000, 0.00002373000, 0.000000000000000000000000115500]),
            ),
            "402": ComponentFractions(
                moles=np.array([0.00626500000, 0.0708500000, 0.000017830000, 0.00000000000000000000000063080]),
                mass=np.array([0.017590000, 0.069300000, 0.00005743000, 0.000000000000000000000000182800]),
            ),
            "503": ComponentFractions(
                moles=np.array([0.00109400000, 0.0290900000, 0.000001688000, 0.00000000000000000000000009668]),
                mass=np.array([0.003813000, 0.035320000, 0.00000675000, 0.000000000000000000000000034780]),
            ),
            "504": ComponentFractions(
                moles=np.array([0.00102000000, 0.0357500000, 0.000002269000, 0.00000000000000000000000008706]),
                mass=np.array([0.003555000, 0.043410000, 0.00000906800, 0.000000000000000000000000031310]),
            ),
            "605": ComponentFractions(
                moles=np.array([0.00407000000, 0.4269000000, 0.000006839000, 0.00000000000000000000000029550]),
                mass=np.array([0.016950000, 0.619100000, 0.00003265000, 0.000000000000000000000000127000]),
            ),
            "5": ComponentFractions(
                moles=np.array([0.00000002972, 0.0000004422, 0.000000003738, 1.00000000000000000000000000000]),
                mass=np.array([0.000000288, 0.000001493, 0.00000004154, 1.000000000000000000000000000000]),
            ),
        },
        feed_fractions={
            "3": 0.062202,
            "2": 0.0047,
            "1": 0.046539,
            "101": 0.65364,
            "201": 0.086307,
            "301": 0.045563,
            "401": 0.007579,
            "402": 0.015481,
            "503": 0.005188,
            "504": 0.00612,
            "605": 0.066681,
            "5": 0.001,
        },
    )

    case_2: MultiflashResult = MultiflashResult(
        phase_values={
            PhaseLabels.VAPOR: PhaseValues(percentage=0.9989992588, mercury=104.82781237),
            PhaseLabels.MERCURY: PhaseValues(percentage=0.0010007412, mercury=1000000000.0),
        },
        component_fractions={
            "2": ComponentFractions(
                moles=np.array([0.016930000000, 0.000000000000000000000003431000]),
                mass=np.array([0.02454000000, 0.000000000000000000000000479100]),
            ),
            "1": ComponentFractions(
                moles=np.array([0.053990000000, 0.000000000000000000000006807000]),
                mass=np.array([0.12300000000, 0.000000000000000000000001493000]),
            ),
            "101": ComponentFractions(
                moles=np.array([0.856300000000, 0.000000000000000000000137900000]),
                mass=np.array([0.71080000000, 0.000000000000000000000011030000]),
            ),
            "201": ComponentFractions(
                moles=np.array([0.045770000000, 0.000000000000000000000004810000]),
                mass=np.array([0.07121000000, 0.000000000000000000000000721100]),
            ),
            "301": ComponentFractions(
                moles=np.array([0.017630000000, 0.000000000000000000000001301000]),
                mass=np.array([0.04023000000, 0.000000000000000000000000285900]),
            ),
            "401": ComponentFractions(
                moles=np.array([0.002424000000, 0.000000000000000000000000138900]),
                mass=np.array([0.00729100000, 0.000000000000000000000000040240]),
            ),
            "402": ComponentFractions(
                moles=np.array([0.004378000000, 0.000000000000000000000000232400]),
                mass=np.array([0.01317000000, 0.000000000000000000000000067340]),
            ),
            "503": ComponentFractions(
                moles=np.array([0.001212000000, 0.000000000000000000000000050060]),
                mass=np.array([0.00452500000, 0.000000000000000000000000018010]),
            ),
            "504": ComponentFractions(
                moles=np.array([0.001102000000, 0.000000000000000000000000042380]),
                mass=np.array([0.00411400000, 0.000000000000000000000000015240]),
            ),
            "608": ComponentFractions(
                moles=np.array([0.000147300000, 0.000000000000000000000000005109]),
                mass=np.array([0.00059520000, 0.000000000000000000000000001990]),
            ),
            "710": ComponentFractions(
                moles=np.array([0.000084150000, 0.000000000000000000000000002175]),
                mass=np.array([0.00040120000, 0.000000000000000000000000000999]),
            ),
            "809": ComponentFractions(
                moles=np.array([0.000023040000, 0.000000000000000000000000000433]),
                mass=np.array([0.00012660000, 0.000000000000000000000000000229]),
            ),
            "5": ComponentFractions(
                moles=np.array([0.000000012360, 1.000000000000000000000000000000]),
                mass=np.array([0.00000012830, 1.000000000000000000000000000000]),
            ),
        },
        feed_fractions={
            "2": 0.0169,
            "1": 0.0539,
            "101": 0.854808,
            "201": 0.045685,
            "301": 0.0176,
            "401": 0.00242,
            "402": 0.00437,
            "503": 0.00121,
            "504": 0.0011,
            "608": 0.000147,
            "710": 0.000084,
            "809": 0.000023,
            "5": 0.001,
        },
    )

    case_3: MultiflashResult = MultiflashResult(
        phase_values={
            PhaseLabels.VAPOR: PhaseValues(percentage=0.8323991912, mercury=0.0162210014),
            PhaseLabels.LIQUID: PhaseValues(percentage=0.1666009038, mercury=0.7598891939),
            PhaseLabels.MERCURY: PhaseValues(percentage=0.0009999050, mercury=1000000000.0),
        },
        component_fractions={
            "1": ComponentFractions(
                moles=np.array([0.022550000000000, 0.000000000000000000000002575000, 0.04614000000000]),
                mass=np.array([0.0571800000000, 0.000000000000000000000000564900, 0.0781900000000]),
            ),
            "2": ComponentFractions(
                moles=np.array([0.006758000000000, 0.000000000000000000000001322000, 0.00114600000000]),
                mass=np.array([0.0109100000000, 0.000000000000000000000000184700, 0.0012360000000]),
            ),
            "101": ComponentFractions(
                moles=np.array([0.933100000000000, 0.000000000000000000000138200000, 0.58570000000000]),
                mass=np.array([0.8627000000000, 0.000000000000000000000011060000, 0.3618000000000]),
            ),
            "201": ComponentFractions(
                moles=np.array([0.032910000000000, 0.000000000000000000000002795000, 0.19040000000000]),
                mass=np.array([0.0570300000000, 0.000000000000000000000000419000, 0.2205000000000]),
            ),
            "301": ComponentFractions(
                moles=np.array([0.004217000000000, 0.000000000000000000000000220600, 0.11770000000000]),
                mass=np.array([0.0107200000000, 0.000000000000000000000000048490, 0.1998000000000]),
            ),
            "401": ComponentFractions(
                moles=np.array([0.000195000000000, 0.000000000000000000000000007183, 0.01671000000000]),
                mass=np.array([0.0006533000000, 0.000000000000000000000000002081, 0.0374000000000]),
            ),
            "402": ComponentFractions(
                moles=np.array([0.000227300000000, 0.000000000000000000000000007619, 0.03028000000000]),
                mass=np.array([0.0007614000000, 0.000000000000000000000000002208, 0.0677800000000]),
            ),
            "503": ComponentFractions(
                moles=np.array([0.000014630000000, 0.000000000000000000000000000346, 0.00609100000000]),
                mass=np.array([0.0000608100000, 0.000000000000000000000000000125, 0.0169200000000]),
            ),
            "504": ComponentFractions(
                moles=np.array([0.000009358000000, 0.000000000000000000000000000200, 0.00591900000000]),
                mass=np.array([0.0000389100000, 0.000000000000000000000000000072, 0.0164400000000]),
            ),
            "5": ComponentFractions(
                moles=np.array([0.000000000001912, 1.000000000000000000000000000000, 0.00000000009838]),
                mass=np.array([0.0000000000221, 1.000000000000000000000000000000, 0.0000000007599]),
            ),
        },
        feed_fractions={
            "1": 0.026457,
            "2": 0.005817,
            "101": 0.874382,
            "201": 0.059121,
            "301": 0.023115,
            "401": 0.002947,
            "402": 0.005235,
            "503": 0.001027,
            "504": 0.000994,
            "5": 0.001,
        },
    )


class OutputArguments(NamedTuple):
    case_1: dict = {
        "phase_values": {
            "Vapor": {"percentage": 0.7889194452, "mercury": 252.15087669},
            "Liquid": {"percentage": 0.1485055781, "mercury": 1492.7149426},
            "Aqueous": {"percentage": 0.0615760650, "mercury": 41.540651304},
            "Mercury": {"percentage": 0.0009989116, "mercury": 1000000000.0},
        },
        "component_fractions": {
            "3": [0.00044930000, 0.0023390000, 0.997800000000, 0.00000000000000000000000006834],
            "2": [0.00588400000, 0.0003604000, 0.000002575000, 0.00000000000000000000000116800],
            "1": [0.05393000000, 0.0261200000, 0.001117000000, 0.00000000000000000000000848600],
            "101": [0.79800000000, 0.1574000000, 0.000848000000, 0.00000000000000000000014150000],
            "201": [0.09056000000, 0.0994700000, 0.000115900000, 0.00000000000000000000001295000],
            "301": [0.03492000000, 0.1210000000, 0.000123300000, 0.00000000000000000000000415900],
            "401": [0.00381700000, 0.0307000000, 0.000007368000, 0.00000000000000000000000039850],
            "402": [0.00626500000, 0.0708500000, 0.000017830000, 0.00000000000000000000000063080],
            "503": [0.00109400000, 0.0290900000, 0.000001688000, 0.00000000000000000000000009668],
            "504": [0.00102000000, 0.0357500000, 0.000002269000, 0.00000000000000000000000008706],
            "605": [0.00407000000, 0.4269000000, 0.000006839000, 0.00000000000000000000000029550],
            "5": [0.00000002972, 0.0000004422, 0.000000003738, 1.00000000000000000000000000000],
        },
        "feed_fractions": {
            "3": 0.062202,
            "2": 0.0047,
            "1": 0.046539,
            "101": 0.65364,
            "201": 0.086307,
            "301": 0.045563,
            "401": 0.007579,
            "402": 0.015481,
            "503": 0.005188,
            "504": 0.00612,
            "605": 0.066681,
            "5": 0.001,
        },
    }
    case_2: dict = {
        "phase_values": {
            "Vapor": {"percentage": 0.9989992588, "mercury": 104.82781237},
            "Mercury": {"percentage": 0.0010007412, "mercury": 1000000000.0},
        },
        "component_fractions": {
            "2": [0.016930000000, 0.000000000000000000000003431000],
            "1": [0.053990000000, 0.000000000000000000000006807000],
            "101": [0.856300000000, 0.000000000000000000000137900000],
            "201": [0.045770000000, 0.000000000000000000000004810000],
            "301": [0.017630000000, 0.000000000000000000000001301000],
            "401": [0.002424000000, 0.000000000000000000000000138900],
            "402": [0.004378000000, 0.000000000000000000000000232400],
            "503": [0.001212000000, 0.000000000000000000000000050060],
            "504": [0.001102000000, 0.000000000000000000000000042380],
            "608": [0.000147300000, 0.000000000000000000000000005109],
            "710": [0.000084150000, 0.000000000000000000000000002175],
            "809": [0.000023040000, 0.000000000000000000000000000433],
            "5": [0.000000012360, 1.000000000000000000000000000000],
        },
        "feed_fractions": {
            "2": 0.0169,
            "1": 0.0539,
            "101": 0.854808,
            "201": 0.045685,
            "301": 0.0176,
            "401": 0.00242,
            "402": 0.00437,
            "503": 0.00121,
            "504": 0.0011,
            "608": 0.000147,
            "710": 0.000084,
            "809": 0.000023,
            "5": 0.001,
        },
    }
    case_3: dict = {
        "phase_values": {
            "Vapor": {"percentage": 0.8323991912, "mercury": 0.0162210014},
            "Liquid": {"percentage": 0.1666009038, "mercury": 0.7598891939},
            "Mercury": {"percentage": 0.0009999050, "mercury": 1000000000.0},
        },
        "component_fractions": {
            "1": [0.022550000000000, 0.000000000000000000000002575000, 0.04614000000000],
            "2": [0.006758000000000, 0.000000000000000000000001322000, 0.00114600000000],
            "101": [0.933100000000000, 0.000000000000000000000138200000, 0.58570000000000],
            "201": [0.032910000000000, 0.000000000000000000000002795000, 0.19040000000000],
            "301": [0.004217000000000, 0.000000000000000000000000220600, 0.11770000000000],
            "401": [0.000195000000000, 0.000000000000000000000000007183, 0.01671000000000],
            "402": [0.000227300000000, 0.000000000000000000000000007619, 0.03028000000000],
            "503": [0.000014630000000, 0.000000000000000000000000000346, 0.00609100000000],
            "504": [0.000009358000000, 0.000000000000000000000000000200, 0.00591900000000],
            "5": [0.000000000001912, 1.000000000000000000000000000000, 0.00000000009838],
        },
        "feed_fractions": {
            "1": 0.026457,
            "2": 0.005817,
            "101": 0.874382,
            "201": 0.059121,
            "301": 0.023115,
            "401": 0.002947,
            "402": 0.005235,
            "503": 0.001027,
            "504": 0.000994,
            "5": 0.001,
        },
    }


MultiflashInput = InputArguments()
MultiflashEntityOutput = OutputArgumentsEntityTest()
MultiflashOutput = OutputArguments()
